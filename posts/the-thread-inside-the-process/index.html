<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>OS: The Thread Inside The Process | Jon's Blog</title><meta name=keywords content><meta name=description content="image by bytebytego Intro Thread and Process are topics that are widely discussed. The difference between the two cannot be compared apples to apples. If you read the title, you will find a clue that &lsquo;Thread&rsquo; essentially lives inside the &lsquo;Process&rsquo;. You can&rsquo;t spawn a thread without running the process first. In this stories we only cover a big picture about thread and process.
What is Process A process is an instantiation of a program that is being executed by a processor."><meta name=author content><link rel=canonical href=https://joundy.dev/posts/the-thread-inside-the-process/><link crossorigin=anonymous href=/assets/css/stylesheet.f15e1bfddd6490ee4c4bba6eb501f91c2d4138a4caab3b154383f24867c68a49.css integrity="sha256-8V4b/d1kkO5MS7putQH5HC1BOKTKqzsVQ4PySGfGikk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://joundy.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://joundy.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://joundy.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://joundy.dev/apple-touch-icon.png><link rel=mask-icon href=https://joundy.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="OS: The Thread Inside The Process"><meta property="og:description" content="image by bytebytego Intro Thread and Process are topics that are widely discussed. The difference between the two cannot be compared apples to apples. If you read the title, you will find a clue that &lsquo;Thread&rsquo; essentially lives inside the &lsquo;Process&rsquo;. You can&rsquo;t spawn a thread without running the process first. In this stories we only cover a big picture about thread and process.
What is Process A process is an instantiation of a program that is being executed by a processor."><meta property="og:type" content="article"><meta property="og:url" content="https://joundy.dev/posts/the-thread-inside-the-process/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-07-05T21:50:43+07:00"><meta property="article:modified_time" content="2023-07-05T21:50:43+07:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="OS: The Thread Inside The Process"><meta name=twitter:description content="image by bytebytego Intro Thread and Process are topics that are widely discussed. The difference between the two cannot be compared apples to apples. If you read the title, you will find a clue that &lsquo;Thread&rsquo; essentially lives inside the &lsquo;Process&rsquo;. You can&rsquo;t spawn a thread without running the process first. In this stories we only cover a big picture about thread and process.
What is Process A process is an instantiation of a program that is being executed by a processor."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://joundy.dev/posts/"},{"@type":"ListItem","position":2,"name":"OS: The Thread Inside The Process","item":"https://joundy.dev/posts/the-thread-inside-the-process/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"OS: The Thread Inside The Process","name":"OS: The Thread Inside The Process","description":"image by bytebytego Intro Thread and Process are topics that are widely discussed. The difference between the two cannot be compared apples to apples. If you read the title, you will find a clue that \u0026lsquo;Thread\u0026rsquo; essentially lives inside the \u0026lsquo;Process\u0026rsquo;. You can\u0026rsquo;t spawn a thread without running the process first. In this stories we only cover a big picture about thread and process.\nWhat is Process A process is an instantiation of a program that is being executed by a processor.","keywords":[],"articleBody":" image by bytebytego Intro Thread and Process are topics that are widely discussed. The difference between the two cannot be compared apples to apples. If you read the title, you will find a clue that ‘Thread’ essentially lives inside the ‘Process’. You can’t spawn a thread without running the process first. In this stories we only cover a big picture about thread and process.\nWhat is Process A process is an instantiation of a program that is being executed by a processor. When we run a program or service, it creates a process, and the running program can have multiple processes within it, referred to as child processes. These child processes are controlled by the main process. Each process has its own virtual address space, executable code, processor ID, security context, and other attributes. However, these characteristics may vary depending on the operating system you are using, as each OS has its own mechanisms and implementations.\nWhen a process is running, it can spawn one or more threads within it. Having multiple threads within a single process is beneficial when aiming for parallelism or concurrency in program execution.\nWhat is Thread In simple terms, a thread can be seen as an execution unit within a process. It exists within the context of a process, which means that the operating system needs to be aware of the process before executing the thread. Since each process has its own virtual address space, the threads residing within the process can share this virtual address space and system resources. This allows threads to communicate and access shared data within the process, facilitating efficient coordination and resource utilization.\nThe operating system allocates processor time to execute threads within a process. This allocation is managed by the scheduler, which assigns priorities to each thread. The scheduler determines the order and duration of execution for each thread based on these priorities. By spawning multiple threads within a single process, we can achieve instruction concurrency, allowing multiple threads to execute instructions simultaneously, enhancing performance and responsiveness\nThread(s) Per CPU Core ➜ ~ lscpu Vendor ID: GenuineIntel Model name: 11th Gen Intel(R) Core(TM) i7-11370H @ 3.30GHz CPU family: 6 Model: 140 Thread(s) per core: 2 Core(s) per socket: 4 In the previous explanation, I mentioned that it is possible to have multiple threads running within a single process, how is this achieved? You can see that each core can have a maximum of 2 threads, resulting in a total of 8 threads, what would occur if we were to spawn 100 threads within a single process?\nTo be honest, I was also confused at first. Apparently, the reason is that the thread we learned about previously is related to the OS thread, not the CPU thread. The OS thread resides within the process in the kernel, while the CPU thread represents the maximum capability of the CPU to execute threads simultaneously, typically on the same core. CPUs do not care about the number of OS threads you spawn because the OS scheduler handles the task of assigning CPU threads to execute the OS threads.\nReferences: https://learn.microsoft.com/en-us/windows/win32/procthread/processes-and-threads https://learn.microsoft.com/en-us/windows/win32/procthread/scheduling-priorities https://learn.microsoft.com/en-gb/windows/win32/procthread/about-processes-and-threads?redirectedfrom=MSDN https://www.quora.com/What-is-the-difference-between-CPU-thread-and-OS-thread (answered by Herb Martin) https://blog.bytebytego.com/p/ep37-process-vs-thread ","wordCount":"525","inLanguage":"en","datePublished":"2023-07-05T21:50:43+07:00","dateModified":"2023-07-05T21:50:43+07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://joundy.dev/posts/the-thread-inside-the-process/"},"publisher":{"@type":"Organization","name":"Jon's Blog","logo":{"@type":"ImageObject","url":"https://joundy.dev/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://joundy.dev/ accesskey=h title="Jon's Blog (Alt + H)">Jon's Blog</a><div class=logo-switches></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>OS: The Thread Inside The Process</h1><div class=post-meta><span title='2023-07-05 21:50:43 +0700 +0700'>July 5, 2023</span></div></header><div class=post-content><p><img loading=lazy src=/images/process_thread.png alt="Image alt"></p><h6 id=image-by-bytebytego><em>image by bytebytego</em><a hidden class=anchor aria-hidden=true href=#image-by-bytebytego>#</a></h6><h2 id=intro>Intro<a hidden class=anchor aria-hidden=true href=#intro>#</a></h2><p>Thread and Process are topics that are widely discussed. The difference between the two cannot be compared apples to apples. If you read the title, you will find a clue that &lsquo;Thread&rsquo; essentially lives inside the &lsquo;Process&rsquo;.
You can&rsquo;t spawn a thread without running the process first. In this stories we only cover a big picture about thread and process.</p><h2 id=what-is-process>What is Process<a hidden class=anchor aria-hidden=true href=#what-is-process>#</a></h2><p>A process is an instantiation of a program that is being executed by a processor. When we run a program or service, it creates a process, and the running program can have multiple processes within it, referred to as child processes.
These child processes are controlled by the main process.
Each process has its own virtual address space, executable code, processor ID, security context, and other attributes. However, these characteristics may vary depending on the operating system you are using, as each OS has its own mechanisms and implementations.</p><p>When a process is running, it can spawn one or more threads within it. Having multiple threads within a single process is beneficial when aiming for parallelism or concurrency in program execution.</p><h2 id=what-is-thread>What is Thread<a hidden class=anchor aria-hidden=true href=#what-is-thread>#</a></h2><p>In simple terms, a thread can be seen as an execution unit within a process. It exists within the context of a process, which means that the operating system needs to be aware of the process before executing the thread.
Since each process has its own virtual address space, the threads residing within the process can share this virtual address space and system resources.
This allows threads to communicate and access shared data within the process, facilitating efficient coordination and resource utilization.</p><p>The operating system allocates processor time to execute threads within a process. This allocation is managed by the scheduler, which assigns priorities to each thread.
The scheduler determines the order and duration of execution for each thread based on these priorities.
By spawning multiple threads within a single process, we can achieve instruction concurrency, allowing multiple threads to execute instructions simultaneously, enhancing performance and responsiveness</p><h2 id=threads-per-cpu-core>Thread(s) Per CPU Core<a hidden class=anchor aria-hidden=true href=#threads-per-cpu-core>#</a></h2><pre tabindex=0><code>➜  ~ lscpu
Vendor ID:               GenuineIntel
  Model name:            11th Gen Intel(R) Core(TM) i7-11370H @ 3.30GHz
    CPU family:          6
    Model:               140
    Thread(s) per core:  2
    Core(s) per socket:  4
</code></pre><p>In the previous explanation, I mentioned that it is possible to have multiple threads running within a single process, how is this achieved?
You can see that each core can have a maximum of 2 threads, resulting in a total of 8 threads, what would occur if we were to spawn 100 threads within a single process?</p><p>To be honest, I was also confused at first. Apparently, the reason is that the thread we learned about previously is related to the OS thread, not the CPU thread. The OS thread resides within the process in the kernel, while the CPU thread represents the maximum capability of the CPU to execute threads simultaneously, typically on the same core.
CPUs do not care about the number of OS threads you spawn because the OS scheduler handles the task of assigning CPU threads to execute the OS threads.</p><h3 id=references>References:<a hidden class=anchor aria-hidden=true href=#references>#</a></h3><ul><li><a href=https://learn.microsoft.com/en-us/windows/win32/procthread/processes-and-threads>https://learn.microsoft.com/en-us/windows/win32/procthread/processes-and-threads</a></li><li><a href=https://learn.microsoft.com/en-us/windows/win32/procthread/scheduling-priorities>https://learn.microsoft.com/en-us/windows/win32/procthread/scheduling-priorities</a></li><li><a href="https://learn.microsoft.com/en-gb/windows/win32/procthread/about-processes-and-threads?redirectedfrom=MSDN">https://learn.microsoft.com/en-gb/windows/win32/procthread/about-processes-and-threads?redirectedfrom=MSDN</a></li><li><a href=https://www.quora.com/What-is-the-difference-between-CPU-thread-and-OS-thread>https://www.quora.com/What-is-the-difference-between-CPU-thread-and-OS-thread</a> (answered by Herb Martin)</li><li><a href=https://blog.bytebytego.com/p/ep37-process-vs-thread>https://blog.bytebytego.com/p/ep37-process-vs-thread</a></li></ul></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://joundy.dev/>Jon's Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>