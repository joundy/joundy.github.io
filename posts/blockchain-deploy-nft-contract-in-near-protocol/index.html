<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Blockchain: Deploy NFT Contract in Near Protocol | Jon's Blog</title><meta name=keywords content><meta name=description content="Intro Hello guys, I hope everyone is doing well, in this post I am going to create an NFT (Non-Fungible Token) contract in Near protocol, have you ever heard of near protocol? near protocol is a layer 1 blockchain network, like an Ethereum network, near uses Proof of Stake (POS) instead of Proof of Work (POW), besides of that the Near protocol has excellent features like Nightshade Sharding that can validate a transaction really fast, personally, I really enjoy developing Dapps in near rather than another blockchain, but because near is relatively new, there are very few tutorials out there, so this is one the reason why I created this article, by the way, you can learn more about near on this website near developer."><meta name=author content><link rel=canonical href=https://joundy.me/posts/blockchain-deploy-nft-contract-in-near-protocol/><link crossorigin=anonymous href=/assets/css/stylesheet.cf829ba4aa7ece9e04d441a32c5a0220b3c64c189f3a7d43f6d50b784a5a745b.css integrity="sha256-z4KbpKp+zp4E1EGjLFoCILPGTBifOn1D9tULeEpadFs=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://joundy.me/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://joundy.me/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://joundy.me/favicon-32x32.png><link rel=apple-touch-icon href=https://joundy.me/apple-touch-icon.png><link rel=mask-icon href=https://joundy.me/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Blockchain: Deploy NFT Contract in Near Protocol"><meta property="og:description" content="Intro Hello guys, I hope everyone is doing well, in this post I am going to create an NFT (Non-Fungible Token) contract in Near protocol, have you ever heard of near protocol? near protocol is a layer 1 blockchain network, like an Ethereum network, near uses Proof of Stake (POS) instead of Proof of Work (POW), besides of that the Near protocol has excellent features like Nightshade Sharding that can validate a transaction really fast, personally, I really enjoy developing Dapps in near rather than another blockchain, but because near is relatively new, there are very few tutorials out there, so this is one the reason why I created this article, by the way, you can learn more about near on this website near developer."><meta property="og:type" content="article"><meta property="og:url" content="https://joundy.me/posts/blockchain-deploy-nft-contract-in-near-protocol/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-25T22:54:04+07:00"><meta property="article:modified_time" content="2022-08-25T22:54:04+07:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Blockchain: Deploy NFT Contract in Near Protocol"><meta name=twitter:description content="Intro Hello guys, I hope everyone is doing well, in this post I am going to create an NFT (Non-Fungible Token) contract in Near protocol, have you ever heard of near protocol? near protocol is a layer 1 blockchain network, like an Ethereum network, near uses Proof of Stake (POS) instead of Proof of Work (POW), besides of that the Near protocol has excellent features like Nightshade Sharding that can validate a transaction really fast, personally, I really enjoy developing Dapps in near rather than another blockchain, but because near is relatively new, there are very few tutorials out there, so this is one the reason why I created this article, by the way, you can learn more about near on this website near developer."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://joundy.me/posts/"},{"@type":"ListItem","position":2,"name":"Blockchain: Deploy NFT Contract in Near Protocol","item":"https://joundy.me/posts/blockchain-deploy-nft-contract-in-near-protocol/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Blockchain: Deploy NFT Contract in Near Protocol","name":"Blockchain: Deploy NFT Contract in Near Protocol","description":"Intro Hello guys, I hope everyone is doing well, in this post I am going to create an NFT (Non-Fungible Token) contract in Near protocol, have you ever heard of near protocol? near protocol is a layer 1 blockchain network, like an Ethereum network, near uses Proof of Stake (POS) instead of Proof of Work (POW), besides of that the Near protocol has excellent features like Nightshade Sharding that can validate a transaction really fast, personally, I really enjoy developing Dapps in near rather than another blockchain, but because near is relatively new, there are very few tutorials out there, so this is one the reason why I created this article, by the way, you can learn more about near on this website near developer.","keywords":[],"articleBody":"Intro Hello guys, I hope everyone is doing well, in this post I am going to create an NFT (Non-Fungible Token) contract in Near protocol, have you ever heard of near protocol? near protocol is a layer 1 blockchain network, like an Ethereum network, near uses Proof of Stake (POS) instead of Proof of Work (POW), besides of that the Near protocol has excellent features like Nightshade Sharding that can validate a transaction really fast, personally, I really enjoy developing Dapps in near rather than another blockchain, but because near is relatively new, there are very few tutorials out there, so this is one the reason why I created this article, by the way, you can learn more about near on this website near developer.\nIn this article, we will use Rust as a programming language, if you don’t familiar with rust don’t worry it’s not scary as you think, I can say that if you want to build a custom smart contract you only need to learn the basics of Rust, is true because the smart contract is limited to do crazy things like async process or concurrency ( not in cross contract call ). Rust is only used to compile the logic into wasm binary, other than Rust, you can actually create a smart contract using assembly language \u0026 javascript near-sdk-js, but I recommended to use rust to build a smart contract because it’s safer and has a really good compiler.\nInstall the Tools First, you have to install rustrc to compile the rust code, as the official website said, it’s recommended to use rustup, install rustup, just follow the instructions on the website.\ncurl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh Check the installation:\n➜ ~ rustc --version rustc 1.61.0 (fe5b13d68 2022-05-18) ➜ ~ cargo --version cargo 1.61.0 (a028ae4 2022-04-29) The second tool is Install near-cli, this tool is used to deploy the wasm binary into the near blockchain, near-cli is running on top of nodejs, install the nodejs if you haven’t installed it yet on your machine download nodejs.\nInstall near-cli as a global package using global argument\nnpm i -g near-cli Check the installation:\nnear --version Compile the Smart contract In this tutorial, we will use the NFT contract example from the official repository, like the Ethereum protocol Near also has its own standard for the NFT contract, near uses NEP-171 for the core functionality of the interface method, its official standard that near provided and recommended to create the NFT smart-contract, if you want to learn more about that you can read all of the standards on nomicon.\nBuild the contract from the example project from their repository, the example project is very enough to cover all the NFTs contract’s functionality, that example also uses the near-contract-standards\nClone the repository\ngit clone https://github.com/near-examples/NFT.git Build the contract\ncd NFT ./scripts/build.sh Let’s verify that the contract is has compiled successfully\n➜ NFT git:(master) cd res \u0026\u0026 ls README.md approval_receiver.wasm non_fungible_token.wasm token_receiver.wasm looks that we now have non_fungible_token.wasm in the res directory, this file is the wasm binary contract that will be deployed to the near network.\nDeploy Smart Contract Using near-dev Open your terminal, and go to the directory of the wasm file located.\ncd res near dev-deploy non_fungible_token.wasm The dev-deploy command will automatically create a testnet account and will be deployed the contract to that account, the contract address will be shown if the deploying process is successfully processed, and the address will be like this dev--. dev-deploy is useful when you want to test your contract immediately in the testnet network.\n➜ res git:(master) near dev-deploy --wasmFile non_fungible_token.wasm Starting deployment. Account id: dev-1662209846446-10678431456293, node: https://rpc.testnet.near.org, helper: https://helper.testnet.near.org, file: non_fungible_token.wasm Transaction Id Gph2kTpJ2DE7Wb2aN1RcPhJCFCNatDtCCFYUtnb6Rgby To see the transaction in the transaction explorer, please open this url in your browser https://explorer.testnet.near.org/transactions/Gph2kTpJ2DE7Wb2aN1RcPhJCFCNatDtCCFYUtnb6Rgby Done deploying to dev-1662209846446-10678431456293 In this example the dev-deploy contract address is dev-1662209846446-10678431456293\nDeploy Smart Contract Within Your Account Unlike other protocols, in the near, you can deploy the contract to your own account, your account will have executable code and perform transactions in the account’s name.\nBefore you deploy, you have to connect/login the near account into cli, if you haven’t had a near account then create it first, I recommend using the testnet account for this tutorial. The wallet url is wallet testnet and wallet mainnet.\nOkay, make sure you have logged your account into your web wallet, and type login on your terminal.\nnear login Follow the instructions, and approve the login action on the web. By default near-cli will use the testnet RPC,\n➜ res git:(master) near login Please authorize NEAR CLI on at least one of your accounts. If your browser doesn't automatically open, please visit this URL https://wallet.testnet.near.org/login/?referrer=NEAR+CLI\u0026public_key=ed25519%3A5AdYZAcAVnt98\u0026success_url=http%3A%2F%2F127.0.0.1%3A5000 Please authorize at least one account at the URL above. Which account did you authorize for use with NEAR CLI? Enter it here (if not redirected automatically): If you want to switch to the mainnet network you have to export NEAR_ENV=mainnet before you do some action within near-cli.\nexport NEAR_ENV=mainnet near login Make sure that the account has been added successfully\n➜ ~ ls ~/.near-credentials/testnet .testnet.json If everything is ready, now you can deploy the contract to your own account\nnear deploy –accountId --wasmFile non_fungible_token.wasm If the contract is successfully deployed, now your account has 2 functionality, as a normal wallet and as a contract address that can execute the smart contract methods. FYI 1 account address only support storing 1 smart contract, if you deployed another smart contract to the same account it will break the state, so be careful.\nCongratulations you have successfully deployed the smart contract in the near protocol, let’s continue to test the contract methods.\nTest Smart Contract To execute the methods in the contract, you need to use near-cli, the near-cli will call the methods via RPC network, it’s has 2 types of interaction, view method, and call method.\ncall: makes a contract call that can invoke change or view methods. view: makes a contract call that can only invoke a view method. The difference between them is, the call method needs to attach some near balance to cover the gas fee and the view method doesn’t, even though you can actually execute the view method via call method but it’s not efficient.\nnear –accountId The accountId is not necessary when you do the view method. Init the contract (call) near call --accountId new_default_meta '{\"owner_id\": \"\"}' ➜ ~ near call --accountId dev-1662209846446-10678431456293 dev-1662209846446-10678431456293 new_default_meta '{\"owner_id\": \"dev-1662209846446-10678431456293\"}' Scheduling a call: dev-1662209846446-10678431456293.new_default_meta({\"owner_id\": \"dev-1662209846446-10678431456293\"}) Doing account.functionCall() Transaction Id 2erm5cdzDLwX8niT7gAmY9hnxTjmw7uzcfFU9vAtyTZb To see the transaction in the transaction explorer, please open this url in your browser https://explorer.testnet.near.org/transactions/2erm5cdzDLwX8niT7gAmY9hnxTjmw7uzcfFU9vAtyTZb '' Mint the new token (call) near call --accountId nft_mint '{\"token_id\": \"0\", \"receiver_id\": \"\", \"token_metadata\": { \"title\": \"Olympus Mons\", \"description\": \"Tallest mountain in charted solar system\", \"media\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Olympus_Mons_alt.jpg/1024px-Olympus_Mons_alt.jpg\", \"copies\": 1}}' --depositYocto 7430000000000000000000 depositYocto is an argument to deposit some balance to the contract, usually, this needed to cover the user’s storage ➜ ~ near call --accountId dev-1662209846446-10678431456293 dev-1662209846446-10678431456293 nft_mint '{\"token_id\": \"0\", \"receiver_id\": \"dev-1662209846446-10678431456293\", \"token_metadata\": { \"title\": \"Olympus Mons\", \"description\": \"Tallest mountain in charted solar system\", \"media\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Olympus_Mons_alt.jpg/1024px-Olympus_Mons_alt.jpg\", \"copies\": 1}}' --depositYocto 7430000000000000000000 Scheduling a call: dev-1662209846446-10678431456293.nft_mint({\"token_id\": \"0\", \"receiver_id\": \"dev-1662209846446-10678431456293\", \"token_metadata\": { \"title\": \"Olympus Mons\", \"description\": \"Tallest mountain in charted solar system\", \"media\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Olympus_Mons_alt.jpg/1024px-Olympus_Mons_alt.jpg\", \"copies\": 1}}) with attached 0.00743 NEAR Doing account.functionCall() Receipt: 4ThsZ6CWgC9QL6E2EdFp4xLrsnvKahWABYe5A34KzGmH Log [dev-1662209846446-10678431456293]: EVENT_JSON:{\"standard\":\"nep171\",\"version\":\"1.0.0\",\"event\":\"nft_mint\",\"data\":[{\"owner_id\":\"dev-1662209846446-10678431456293\",\"token_ids\":[\"0\"]}]} Transaction Id DRMPmkW87vSAhofS6nRCYJrXzb4ZjzVS8oW7axWhNjrJ To see the transaction in the transaction explorer, please open this url in your browser https://explorer.testnet.near.org/transactions/DRMPmkW87vSAhofS6nRCYJrXzb4ZjzVS8oW7axWhNjrJ { token_id: '0', owner_id: 'dev-1662209846446-10678431456293', metadata: { title: 'Olympus Mons', description: 'Tallest mountain in charted solar system', media: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Olympus_Mons_alt.jpg/1024px-Olympus_Mons_alt.jpg', media_hash: null, copies: 1, issued_at: null, expires_at: null, starts_at: null, updated_at: null, extra: null, reference: null, reference_hash: null }, approved_account_ids: {} } View token (view) Okey let’s view the token that we have minted.\nnear view nft_token ‘{“token_id”: “1”}’ ➜ ~ near view dev-1662209846446-10678431456293 nft_token '{\"token_id\": \"1\"}' View call: dev-1662209846446-10678431456293.nft_token({\"token_id\": \"1\"}) { token_id: '1', owner_id: 'dev-1662209846446-10678431456293', metadata: { title: 'Olympus Mons', description: 'Tallest mountain in charted solar system', media: 'https://akjsdfpkajskdfjasoidfjiasdjfiasjdfoiajsdfoipjasoidfjasoidjfpaoisdjfpoiasjdfoijasdoifjasiojdfiosjdfupload.wikimedia.org/wikipedia/commons/thumb/0/00/Olympus_Mons_alt.jpg/1024px-Olympus_Mons_alt.jpg', media_hash: null, copies: 1, issued_at: null, expires_at: null, starts_at: null, updated_at: null, extra: null, reference: null, reference_hash: null }, approved_account_ids: {} } Transfer the token to another user (call) near call --accountId nft_transfer '{\"token_id\": \"1\", \"receiver_id\": \"\", \"memo\": \"transfer ownership\"}' --depositYocto 1 Change the owner of the token, the current owner is dev-1662209846446-10678431456293, let’s transfer the token to kangmalu.testnet.\n➜ ~ near call --accountId dev-1662209846446-10678431456293 dev-1662209846446-10678431456293 nft_transfer '{\"token_id\": \"1\", \"receiver_id\": \"kangmalu.testnet\", \"memo\": \"transfer ownership\"}' --depositYocto 1 Scheduling a call: dev-1662209846446-10678431456293.nft_transfer({\"token_id\": \"1\", \"receiver_id\": \"kangmalu.testnet\", \"memo\": \"transfer ownership\"}) with attached 0.000000000000000000000001 NEAR Doing account.functionCall() Receipt: mNd92jUgSuCuLKX1WyVk888u4oNRGd2WByMR7CqXMB4 Log [dev-1662209846446-10678431456293]: EVENT_JSON:{\"standard\":\"nep171\",\"version\":\"1.0.0\",\"event\":\"nft_transfer\",\"data\":[{\"old_owner_id\":\"dev-1662209846446-10678431456293\",\"new_owner_id\":\"kangmalu.testnet\",\"token_ids\":[\"1\"],\"memo\":\"transfer ownership\"}]} Transaction Id CrvL5yreX9XJUJbMcJXBG3nEVNB5MjT4c79DsGGvmbRV To see the transaction in the transaction explorer, please open this url in your browser https://explorer.testnet.near.org/transactions/CrvL5yreX9XJUJbMcJXBG3nEVNB5MjT4c79DsGGvmbRV '' View token after the owner changed (view) Let’s view the token after the owner is changed.\n➜ ~ near view dev-1662209846446-10678431456293 nft_token '{\"token_id\": \"1\"}' View call: dev-1662209846446-10678431456293.nft_token({\"token_id\": \"1\"}) { token_id: '1', owner_id: 'kangmalu.testnet', metadata: { title: 'Olympus Mons', description: 'Tallest mountain in charted solar system', media: 'https://akjsdfpkajskdfjasoidfjiasdjfiasjdfoiajsdfoipjasoidfjasoidjfpaoisdjfpoiasjdfoijasdoifjasiojdfiosjdfupload.wikimedia.org/wikipedia/commons/thumb/0/00/Olympus_Mons_alt.jpg/1024px-Olympus_Mons_alt.jpg', media_hash: null, copies: 1, issued_at: null, expires_at: null, starts_at: null, updated_at: null, extra: null, reference: null, reference_hash: null }, approved_account_ids: {} } That’s all guys, I hope this article can help you when you want to learn more about near protocol, thank you very much, and have a nice day.\n","wordCount":"1559","inLanguage":"en","datePublished":"2022-08-25T22:54:04+07:00","dateModified":"2022-08-25T22:54:04+07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://joundy.me/posts/blockchain-deploy-nft-contract-in-near-protocol/"},"publisher":{"@type":"Organization","name":"Jon's Blog","logo":{"@type":"ImageObject","url":"https://joundy.me/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://joundy.me/ accesskey=h title="Jon's Blog (Alt + H)">Jon's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Blockchain: Deploy NFT Contract in Near Protocol</h1><div class=post-meta><span title='2022-08-25 22:54:04 +0700 +0700'>August 25, 2022</span></div></header><div class=post-content><h2 id=intro>Intro<a hidden class=anchor aria-hidden=true href=#intro>#</a></h2><p>Hello guys, I hope everyone is doing well, in this post I am going to create an NFT (Non-Fungible Token) contract in Near protocol, have you ever heard of near protocol? near protocol is a layer 1 blockchain network, like an Ethereum network, near uses <strong>Proof of Stake</strong> (POS) instead of <strong>Proof of Work</strong> (POW), besides of that the Near protocol has excellent features like <strong>Nightshade Sharding</strong> that can validate a transaction really fast, personally, I really enjoy developing Dapps in near rather than another blockchain, but because near is relatively new, there are very few tutorials out there, so this is one the reason why I created this article, by the way, you can learn more about near on this website <a href=https://near.org/developers/>near developer</a>.</p><p>In this article, we will use <strong>Rust</strong> as a programming language, if you don&rsquo;t familiar with rust don’t worry it’s not scary as you think, I can say that if you want to build a custom smart contract you only need to learn the basics of Rust, is true because the smart contract is limited to do crazy things like async process or concurrency ( not in cross contract call ). Rust is only used to compile the logic into wasm binary, other than Rust, you can actually create a smart contract using assembly language & javascript <a href=https://docs.near.org/tools/near-sdk-js>near-sdk-js</a>, but I recommended to use rust to build a smart contract because it&rsquo;s safer and has a really good compiler.</p><h2 id=install-the-tools>Install the Tools<a hidden class=anchor aria-hidden=true href=#install-the-tools>#</a></h2><p>First, you have to install <strong>rustrc</strong> to compile the rust code, as the official website said, it’s recommended to use rustup, <a href=https://www.rust-lang.org/tools/install>install rustup</a>, just follow the instructions on the website.</p><pre tabindex=0><code>curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh
</code></pre><p>Check the installation:</p><pre tabindex=0><code>➜  ~ rustc --version
rustc 1.61.0 (fe5b13d68 2022-05-18)
➜  ~ cargo --version
cargo 1.61.0 (a028ae4 2022-04-29)
</code></pre><p>The second tool is Install <strong>near-cli</strong>, this tool is used to deploy the wasm binary into the near blockchain, near-cli is running on top of nodejs, install the nodejs if you haven’t installed it yet on your machine <a href=https://nodejs.org/en/download/>download nodejs</a>.</p><p>Install near-cli as a global package using global argument</p><pre tabindex=0><code>npm i -g near-cli
</code></pre><p>Check the installation:</p><pre tabindex=0><code>near --version
</code></pre><h2 id=compile-the-smart-contract>Compile the Smart contract<a hidden class=anchor aria-hidden=true href=#compile-the-smart-contract>#</a></h2><p>In this tutorial, we will use the NFT contract example from the official repository, like the Ethereum protocol Near also has its own standard for the NFT contract, near uses <strong>NEP-171</strong> for the core functionality of the interface method, its official standard that near provided and recommended to create the NFT smart-contract, if you want to learn more about that you can read all of the standards on <a href=https://nomicon.io>nomicon</a>.</p><p>Build the contract from the example project from their repository, the example project is very enough to cover all the NFTs contract&rsquo;s functionality, that example also uses the <a href=https://github.com/near/near-sdk-rs/tree/master/near-contract-standards>near-contract-standards</a></p><p>Clone the repository</p><pre tabindex=0><code>git clone https://github.com/near-examples/NFT.git
</code></pre><p>Build the contract</p><pre tabindex=0><code>cd NFT
./scripts/build.sh
</code></pre><p>Let’s verify that the contract is has compiled successfully</p><pre tabindex=0><code>➜  NFT git:(master) cd res &amp;&amp; ls
README.md  approval_receiver.wasm  non_fungible_token.wasm  token_receiver.wasm
</code></pre><p>looks that we now have <strong>non_fungible_token.wasm</strong> in the res directory, this file is the wasm binary contract that will be deployed to the near network.</p><h2 id=deploy-smart-contract-using-near-dev>Deploy Smart Contract Using near-dev<a hidden class=anchor aria-hidden=true href=#deploy-smart-contract-using-near-dev>#</a></h2><p>Open your terminal, and go to the directory of the wasm file located.</p><pre tabindex=0><code>cd res
near dev-deploy non_fungible_token.wasm
</code></pre><p>The dev-deploy command will automatically create a testnet account and will be deployed the contract to that account, the contract address will be shown if the deploying process is successfully processed, and the address will be like this <strong>dev-&lt;timestamp>-&lt;random_number></strong>. dev-deploy is useful when you want to test your contract immediately in the testnet network.</p><pre tabindex=0><code>➜  res git:(master) near dev-deploy --wasmFile non_fungible_token.wasm

Starting deployment. Account id: dev-1662209846446-10678431456293, node: https://rpc.testnet.near.org, helper: https://helper.testnet.near.org, file: non_fungible_token.wasm
Transaction Id Gph2kTpJ2DE7Wb2aN1RcPhJCFCNatDtCCFYUtnb6Rgby
To see the transaction in the transaction explorer, please open this url in your browser
https://explorer.testnet.near.org/transactions/Gph2kTpJ2DE7Wb2aN1RcPhJCFCNatDtCCFYUtnb6Rgby
Done deploying to dev-1662209846446-10678431456293
</code></pre><p>In this example the dev-deploy contract address is <strong>dev-1662209846446-10678431456293</strong></p><h2 id=deploy-smart-contract-within-your-account>Deploy Smart Contract Within Your Account<a hidden class=anchor aria-hidden=true href=#deploy-smart-contract-within-your-account>#</a></h2><p>Unlike other protocols, in the near, you can deploy the contract to your own account, your account will have executable code and perform transactions in the account’s name.</p><p>Before you deploy, you have to connect/login the near account into cli, if you haven’t had a near account then create it first, I recommend using the testnet account for this tutorial. The wallet url is <a href=https://wallet.testnet.near.org/create>wallet testnet</a> and <a href=https://wallet.near.org/create>wallet mainnet</a>.</p><p>Okay, make sure you have logged your account into your web wallet, and type login on your terminal.</p><pre tabindex=0><code>near login
</code></pre><p>Follow the instructions, and approve the login action on the web. By default near-cli will use the testnet RPC,</p><pre tabindex=0><code>➜  res git:(master) near login

Please authorize NEAR CLI on at least one of your accounts.

If your browser doesn&#39;t automatically open, please visit this URL
https://wallet.testnet.near.org/login/?referrer=NEAR+CLI&amp;public_key=ed25519%3A5AdYZAcAVnt98&amp;success_url=http%3A%2F%2F127.0.0.1%3A5000
Please authorize at least one account at the URL above.

Which account did you authorize for use with NEAR CLI?
Enter it here (if not redirected automatically):
</code></pre><p>If you want to switch to the mainnet network you have to <strong>export NEAR_ENV=mainnet</strong> before you do some action within near-cli.</p><pre tabindex=0><code>export NEAR_ENV=mainnet near login
</code></pre><p>Make sure that the account has been added successfully</p><pre tabindex=0><code>➜  ~ ls ~/.near-credentials/testnet
&lt;your_account&gt;.testnet.json
</code></pre><p>If everything is ready, now you can deploy the contract to your own account</p><pre tabindex=0><code>near deploy –accountId &lt;your_acccount.testnet&gt; --wasmFile non_fungible_token.wasm
</code></pre><p>If the contract is successfully deployed, now your account has 2 functionality, as a <strong>normal wallet</strong> and as a <strong>contract address</strong> that can execute the smart contract methods. FYI 1 account address only support storing 1 smart contract, if you deployed another smart contract to the same account it will break the state, so be careful.</p><p>Congratulations you have successfully deployed the smart contract in the near protocol, let’s continue to test the contract methods.</p><h2 id=test-smart-contract>Test Smart Contract<a hidden class=anchor aria-hidden=true href=#test-smart-contract>#</a></h2><p>To execute the methods in the contract, you need to use near-cli, the near-cli will call the methods via RPC network, it’s has 2 types of interaction, view method, and call method.</p><ul><li><strong>call</strong>: makes a contract call that can invoke change or view methods.</li><li><strong>view</strong>: makes a contract call that can only invoke a view method.</li></ul><p>The difference between them is, the call method needs to attach some near balance to cover the <strong>gas fee</strong> and the view method doesn’t, even though you can actually execute the view method via call method but it&rsquo;s not efficient.</p><pre tabindex=0><code>near &lt;call | view&gt; –accountId &lt;your_account_address&gt; &lt;the_contract_address&gt; &lt;method&gt; &lt;arg_json_formated&gt;
</code></pre><ul><li>The accountId is not necessary when you do the view method.</li></ul><h3 id=init-the-contract-call>Init the contract (call)<a hidden class=anchor aria-hidden=true href=#init-the-contract-call>#</a></h3><pre tabindex=0><code>near call --accountId &lt;your_account&gt; &lt;the_contract_address_or_can_be_your_account_address&gt; new_default_meta &#39;{&#34;owner_id&#34;: &#34;&lt;your_account_or_someone_else&gt;&#34;}&#39;
</code></pre><pre tabindex=0><code>➜  ~ near call --accountId dev-1662209846446-10678431456293 dev-1662209846446-10678431456293 new_default_meta &#39;{&#34;owner_id&#34;: &#34;dev-1662209846446-10678431456293&#34;}&#39;
Scheduling a call: dev-1662209846446-10678431456293.new_default_meta({&#34;owner_id&#34;: &#34;dev-1662209846446-10678431456293&#34;})
Doing account.functionCall()
Transaction Id 2erm5cdzDLwX8niT7gAmY9hnxTjmw7uzcfFU9vAtyTZb
To see the transaction in the transaction explorer, please open this url in your browser
https://explorer.testnet.near.org/transactions/2erm5cdzDLwX8niT7gAmY9hnxTjmw7uzcfFU9vAtyTZb
&#39;&#39;
</code></pre><h3 id=mint-the-new-token-call>Mint the new token (call)<a hidden class=anchor aria-hidden=true href=#mint-the-new-token-call>#</a></h3><pre tabindex=0><code>near call  --accountId &lt;your_account&gt; &lt;contract_address&gt; nft_mint &#39;{&#34;token_id&#34;: &#34;0&#34;, &#34;receiver_id&#34;: &#34;&lt;your_account_or_someone_else&gt;&#34;, &#34;token_metadata&#34;: { &#34;title&#34;: &#34;Olympus Mons&#34;, &#34;description&#34;: &#34;Tallest mountain in charted solar system&#34;, &#34;media&#34;: &#34;https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Olympus_Mons_alt.jpg/1024px-Olympus_Mons_alt.jpg&#34;, &#34;copies&#34;: 1}}&#39; --depositYocto 7430000000000000000000
</code></pre><ul><li>depositYocto is an argument to deposit some balance to the contract, usually, this needed to cover the user&rsquo;s storage</li></ul><pre tabindex=0><code>➜  ~ near call  --accountId dev-1662209846446-10678431456293 dev-1662209846446-10678431456293 nft_mint &#39;{&#34;token_id&#34;: &#34;0&#34;, &#34;receiver_id&#34;: &#34;dev-1662209846446-10678431456293&#34;, &#34;token_metadata&#34;: { &#34;title&#34;: &#34;Olympus Mons&#34;, &#34;description&#34;: &#34;Tallest mountain in charted solar system&#34;, &#34;media&#34;: &#34;https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Olympus_Mons_alt.jpg/1024px-Olympus_Mons_alt.jpg&#34;, &#34;copies&#34;: 1}}&#39; --depositYocto 7430000000000000000000
Scheduling a call: dev-1662209846446-10678431456293.nft_mint({&#34;token_id&#34;: &#34;0&#34;, &#34;receiver_id&#34;: &#34;dev-1662209846446-10678431456293&#34;, &#34;token_metadata&#34;: { &#34;title&#34;: &#34;Olympus Mons&#34;, &#34;description&#34;: &#34;Tallest mountain in charted solar system&#34;, &#34;media&#34;: &#34;https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Olympus_Mons_alt.jpg/1024px-Olympus_Mons_alt.jpg&#34;, &#34;copies&#34;: 1}}) with attached 0.00743 NEAR
Doing account.functionCall()
Receipt: 4ThsZ6CWgC9QL6E2EdFp4xLrsnvKahWABYe5A34KzGmH
        Log [dev-1662209846446-10678431456293]: EVENT_JSON:{&#34;standard&#34;:&#34;nep171&#34;,&#34;version&#34;:&#34;1.0.0&#34;,&#34;event&#34;:&#34;nft_mint&#34;,&#34;data&#34;:[{&#34;owner_id&#34;:&#34;dev-1662209846446-10678431456293&#34;,&#34;token_ids&#34;:[&#34;0&#34;]}]}
Transaction Id DRMPmkW87vSAhofS6nRCYJrXzb4ZjzVS8oW7axWhNjrJ
To see the transaction in the transaction explorer, please open this url in your browser
https://explorer.testnet.near.org/transactions/DRMPmkW87vSAhofS6nRCYJrXzb4ZjzVS8oW7axWhNjrJ
{
  token_id: &#39;0&#39;,
  owner_id: &#39;dev-1662209846446-10678431456293&#39;,
  metadata: {
    title: &#39;Olympus Mons&#39;,
    description: &#39;Tallest mountain in charted solar system&#39;,
    media: &#39;https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Olympus_Mons_alt.jpg/1024px-Olympus_Mons_alt.jpg&#39;,
    media_hash: null,
    copies: 1,
    issued_at: null,
    expires_at: null,
    starts_at: null,
    updated_at: null,
    extra: null,
    reference: null,
    reference_hash: null
  },
  approved_account_ids: {}
}
</code></pre><h3 id=view-token-view>View token (view)<a hidden class=anchor aria-hidden=true href=#view-token-view>#</a></h3><p>Okey let&rsquo;s view the token that we have minted.</p><pre tabindex=0><code>near view &lt;contract_address&gt; nft_token ‘{“token_id”: “1”}’
</code></pre><pre tabindex=0><code>➜  ~ near view dev-1662209846446-10678431456293 nft_token &#39;{&#34;token_id&#34;: &#34;1&#34;}&#39;
View call: dev-1662209846446-10678431456293.nft_token({&#34;token_id&#34;: &#34;1&#34;})
{
  token_id: &#39;1&#39;,
  owner_id: &#39;dev-1662209846446-10678431456293&#39;,
  metadata: {
    title: &#39;Olympus Mons&#39;,
    description: &#39;Tallest mountain in charted solar system&#39;,
    media: &#39;https://akjsdfpkajskdfjasoidfjiasdjfiasjdfoiajsdfoipjasoidfjasoidjfpaoisdjfpoiasjdfoijasdoifjasiojdfiosjdfupload.wikimedia.org/wikipedia/commons/thumb/0/00/Olympus_Mons_alt.jpg/1024px-Olympus_Mons_alt.jpg&#39;,
    media_hash: null,
    copies: 1,
    issued_at: null,
    expires_at: null,
    starts_at: null,
    updated_at: null,
    extra: null,
    reference: null,
    reference_hash: null
  },
  approved_account_ids: {}
}
</code></pre><h3 id=transfer-the-token-to-another-user-call>Transfer the token to another user (call)<a hidden class=anchor aria-hidden=true href=#transfer-the-token-to-another-user-call>#</a></h3><pre tabindex=0><code>near call --accountId &lt;your_account&gt; &lt;contract_address&gt; nft_transfer &#39;{&#34;token_id&#34;: &#34;1&#34;, &#34;receiver_id&#34;: &#34;&lt;receiver_address&gt;&#34;, &#34;memo&#34;: &#34;transfer ownership&#34;}&#39; --depositYocto 1
</code></pre><p>Change the owner of the token, the current owner is <strong>dev-1662209846446-10678431456293</strong>, let&rsquo;s transfer the token to <strong>kangmalu.testnet</strong>.</p><pre tabindex=0><code>➜  ~ near call --accountId dev-1662209846446-10678431456293 dev-1662209846446-10678431456293 nft_transfer &#39;{&#34;token_id&#34;: &#34;1&#34;, &#34;receiver_id&#34;: &#34;kangmalu.testnet&#34;, &#34;memo&#34;: &#34;transfer ownership&#34;}&#39; --depositYocto 1
Scheduling a call: dev-1662209846446-10678431456293.nft_transfer({&#34;token_id&#34;: &#34;1&#34;, &#34;receiver_id&#34;: &#34;kangmalu.testnet&#34;, &#34;memo&#34;: &#34;transfer ownership&#34;}) with attached 0.000000000000000000000001 NEAR
Doing account.functionCall()
Receipt: mNd92jUgSuCuLKX1WyVk888u4oNRGd2WByMR7CqXMB4
        Log [dev-1662209846446-10678431456293]: EVENT_JSON:{&#34;standard&#34;:&#34;nep171&#34;,&#34;version&#34;:&#34;1.0.0&#34;,&#34;event&#34;:&#34;nft_transfer&#34;,&#34;data&#34;:[{&#34;old_owner_id&#34;:&#34;dev-1662209846446-10678431456293&#34;,&#34;new_owner_id&#34;:&#34;kangmalu.testnet&#34;,&#34;token_ids&#34;:[&#34;1&#34;],&#34;memo&#34;:&#34;transfer ownership&#34;}]}
Transaction Id CrvL5yreX9XJUJbMcJXBG3nEVNB5MjT4c79DsGGvmbRV
To see the transaction in the transaction explorer, please open this url in your browser
https://explorer.testnet.near.org/transactions/CrvL5yreX9XJUJbMcJXBG3nEVNB5MjT4c79DsGGvmbRV
&#39;&#39;
</code></pre><h3 id=view-token-after-the-owner-changed-view>View token after the owner changed (view)<a hidden class=anchor aria-hidden=true href=#view-token-after-the-owner-changed-view>#</a></h3><p>Let&rsquo;s view the token after the owner is changed.</p><pre tabindex=0><code>➜  ~ near view dev-1662209846446-10678431456293 nft_token &#39;{&#34;token_id&#34;: &#34;1&#34;}&#39;
View call: dev-1662209846446-10678431456293.nft_token({&#34;token_id&#34;: &#34;1&#34;})
{
  token_id: &#39;1&#39;,
  owner_id: &#39;kangmalu.testnet&#39;,
  metadata: {
    title: &#39;Olympus Mons&#39;,
    description: &#39;Tallest mountain in charted solar system&#39;,
    media: &#39;https://akjsdfpkajskdfjasoidfjiasdjfiasjdfoiajsdfoipjasoidfjasoidjfpaoisdjfpoiasjdfoijasdoifjasiojdfiosjdfupload.wikimedia.org/wikipedia/commons/thumb/0/00/Olympus_Mons_alt.jpg/1024px-Olympus_Mons_alt.jpg&#39;,
    media_hash: null,
    copies: 1,
    issued_at: null,
    expires_at: null,
    starts_at: null,
    updated_at: null,
    extra: null,
    reference: null,
    reference_hash: null
  },
  approved_account_ids: {}
}
</code></pre><p>That’s all guys, I hope this article can help you when you want to learn more about near protocol, thank you very much, and have a nice day.</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://joundy.me/>Jon's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>